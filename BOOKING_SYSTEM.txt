📋 СИСТЕМА БРОНИРОВАНИЯ В БОТЕ

═════════════════════════════════════════════════════════════════

1️⃣ БРОНИРОВАНИЕ ДЛЯ ГОСТЕЙ (через боту)
────────────────────────────────────────────────────────────────

Доступ: Нажать кнопку "📍 Забронировать стол"

Поля для заполнения:
┌─────────────────────────────────────────────────────────┐
│ Шаг 1: ИМЯ                                              │
│        Что спрашивается: "Как вас зовут?"               │
│        Пример: Иван                                      │
├─────────────────────────────────────────────────────────┤
│ Шаг 2: ТЕЛЕФОН                                          │
│        Что спрашивается: "Ваш номер телефона?"          │
│        Пример: +7 (999) 123-45-67                       │
├─────────────────────────────────────────────────────────┤
│ Шаг 3: ДАТА                                             │
│        Что спрашивается: "На какую дату забронировать?"│
│        Примеры: 15.01.2026 или "завтра" или "15 января"│
│        (парсит и распознаёт разные форматы)            │
├─────────────────────────────────────────────────────────┤
│ Шаг 4: ВРЕМЯ                                            │
│        Что спрашивается: "На какое время?"              │
│        Примеры: 19:00 или "7 вечера" или "7 PM"         │
│        (парсит и распознаёт разные форматы)            │
├─────────────────────────────────────────────────────────┤
│ Шаг 5: КОЛИЧЕСТВО ГОСТЕЙ                               │
│        Что спрашивается: "Сколько гостей?"              │
│        Пример: 4 (только цифра!)                       │
├─────────────────────────────────────────────────────────┤
│ Шаг 6: ПРИЧИНА/ПОВОД                                   │
│        Что спрашивается: "В честь какого события?"      │
│        Примеры: день рождения, встреча друзей, деловой │
├─────────────────────────────────────────────────────────┤
│ Шаг 7: ПОДТВЕРЖДЕНИЕ                                   │
│        Вся информация выводится для проверки            │
│        Кнопки: "✅ Подтвердить" или "❌ Отменить"       │
└─────────────────────────────────────────────────────────┘

Куда отправляется: В чат BOOKING_NOTIFICATIONS_CHAT_ID
Автоматически экспортируется в Google Sheets


2️⃣ БРОНИРОВАНИЕ ДЛЯ АДМИНА/СОТРУДНИКА (создание от имени гостя)
────────────────────────────────────────────────────────────────

Доступ: Нажать кнопку "📨 Отправить БРОНЬ" (только для персонала)

Поля:
┌─────────────────────────────────────────────────────────┐
│ Шаг 1: ИМЯ ГОСТЯ                                        │
│        Что спрашивается: "Имя гостя?"                   │
├─────────────────────────────────────────────────────────┤
│ Шаг 2: ТЕЛЕФОН ГОСТЯ                                   │
│        Что спрашивается: "Номер телефона?"              │
├─────────────────────────────────────────────────────────┤
│ Шаг 3: ДАТА                                             │
│        Что спрашивается: "Дата брони?"                  │
├─────────────────────────────────────────────────────────┤
│ Шаг 4: ВРЕМЯ                                            │
│        Что спрашивается: "Время брони?"                 │
├─────────────────────────────────────────────────────────┤
│ Шаг 5: КОЛИЧЕСТВО ГОСТЕЙ                               │
│        Что спрашивается: "Сколько человек?"             │
├─────────────────────────────────────────────────────────┤
│ Шаг 6: ИСТОЧНИК БРОНИРОВАНИЯ (кнопки)                  │
│        Варианты:                                        │
│        • source_phone - Телефон                         │
│        • source_site - Сайт                             │
│        • source_secret - Секретный чат                  │
│        • source_bot - Бот                               │
├─────────────────────────────────────────────────────────┤
│ Шаг 7: ПОДТВЕРЖДЕНИЕ                                   │
│        Вся информация выводится для проверки            │
└─────────────────────────────────────────────────────────┘

Куда отправляется: В чат BOOKING_NOTIFICATIONS_CHAT_ID


3️⃣ БАЗА ДАННЫХ БРОНИРОВАНИЙ
────────────────────────────────────────────────────────────────

Файл: booking_data.json (TinyDB)

Таблица в PostgreSQL: "bookings"
┌──────────────────────────────────────────────────────────┐
│ id              | integer (PRIMARY KEY)                  │
│ user_id         | bigint (от кого бронь)                 │
│ date            | datetime (дата брони)                  │
│ time            | varchar (время - строка)              │
│ guests          | integer (кол-во гостей)                │
│ name            | varchar (имя гостя)                    │
│ phone           | varchar (номер телефона)               │
│ comment         | text (комментарий/повод)               │
│ status          | varchar (new, confirmed, cancelled)    │
│ created         | datetime (когда создана)               │
└──────────────────────────────────────────────────────────┘


4️⃣ КАК РАБОТАЕТ ЭКСПОРТ
────────────────────────────────────────────────────────────────

✅ Автоматический экспорт:
   - Каждая новая бронь автоматически отправляется:
     1. В Telegram (в чат BOOKING_NOTIFICATIONS_CHAT_ID)
     2. В Google Sheets (для отслеживания)

✅ Форматы в Sheets:
   - Гостевые брони → лист "Гостевые брони"
   - Админские брони → лист "Админские брони"


5️⃣ ДРУГИЕ ВАРИАНТЫ БРОНИРОВАНИЯ
────────────────────────────────────────────────────────────────

Кнопка "📍 Забронировать стол" предлагает:

1. "☎️ По телефону" → показать номер телефона ресторана
2. "🌐 На сайте" → ссылка на сайт
3. "💬 В секретном чате" → пригласить в закрытый чат
4. "🤖 В этом боте" → форма бронирования (Шаги 1-7)


═════════════════════════════════════════════════════════════════

✅ ВСЁ РАБОТАЕТ И ГОТОВО К ИСПОЛЬЗОВАНИЮ!
