# üîß –û–¢–ß–ï–¢ –û –î–ò–ê–ì–ù–û–°–¢–ò–ö–ï –ò –ò–°–ü–†–ê–í–õ–ï–ù–ò–ò –ü–†–û–ë–õ–ï–ú

## üéØ –ó–∞–¥–∞—á–∞
–î–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –æ—Ç—á–µ—Ç–∞–º–∏ –∏ –≤—ã–¥–∞—á–µ–π –Ω–∞—Å—Ç–æ–µ–∫ –Ω–∞ Railway.

## üö® –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

### 1. ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç send_report
**–õ–æ–∫–∞—Ü–∏—è**: `main.py:19`
**–ü—Ä–æ–±–ª–µ–º–∞**: 
```python
from handlers.admin_panel import register_admin_handlers, send_report, init_admin_handlers
```
–§—É–Ω–∫—Ü–∏—è `send_report` –±—ã–ª–∞ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –≤ `handlers.reports`, –Ω–æ –∏–º–ø–æ—Ä—Ç –Ω–µ –æ–±–Ω–æ–≤–∏–ª—Å—è.

**–°–∏–º–ø—Ç–æ–º**: 
```
ImportError: cannot import name 'send_report' from 'handlers.admin_panel'
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: ‚úÖ
```python
from handlers.admin_panel import register_admin_handlers, init_admin_handlers
from handlers.reports import send_report
```

### 2. ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ –∑–∞–ø—É—Å–∫–∞ PostgreSQL –º–∏–≥—Ä–∞—Ü–∏–π
**–õ–æ–∫–∞—Ü–∏—è**: `deployment/railway.json`
**–ü—Ä–æ–±–ª–µ–º–∞**: 
```json
"startCommand": "python core/fix_postgresql_columns.py && python main.py"
```
–ù–µ —Ä–∞–±–æ—Ç–∞–ª–æ —Å –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –ø—Ä–æ–µ–∫—Ç–∞.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: ‚úÖ –°–æ–∑–¥–∞–Ω `deployment/startup.sh`:
```bash
#!/bin/bash
export PYTHONPATH="${PYTHONPATH}:$(pwd)"
python core/fix_postgresql_columns.py
python main.py
```

### 3. ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å PYTHONPATH
**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ—Å–ª–µ —Ä–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –∏–º–ø–æ—Ä—Ç–∞–º–∏ –º–æ–¥—É–ª–µ–π
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: ‚úÖ –í startup.sh –¥–æ–±–∞–≤–ª–µ–Ω `export PYTHONPATH`

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:

### 1. ‚úÖ –õ–æ–≥–∏–∫–∞ –≤—ã–¥–∞—á–∏ –Ω–∞—Å—Ç–æ–µ–∫
- `issue_coupon()` - –≤—ã–¥–∞—á–∞ –∫—É–ø–æ–Ω–æ–≤ ‚úÖ
- `handle_redeem_reward()` - –ø–æ–≥–∞—à–µ–Ω–∏–µ –∫—É–ø–æ–Ω–æ–≤ ‚úÖ  
- `database.update_status()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ ‚úÖ

### 2. ‚úÖ –õ–æ–≥–∏–∫–∞ –æ—Ç—á–µ—Ç–æ–≤
- `send_daily_report_job()` - –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—Ç—á–µ—Ç–æ–≤ ‚úÖ
- `generate_daily_report_text()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ ‚úÖ
- `get_report_data_for_period()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö ‚úÖ

### 3. ‚úÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ
- –û—Ç—á–µ—Ç—ã –≤ 05:30 –ú–°–ö ‚úÖ
- –ê—É–¥–∏—Ç–æ—Ä –≤ 04:00 –ú–°–ö ‚úÖ

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

### –î–æ:
```
‚ùå ImportError –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
‚ùå –û—Ç—á–µ—Ç—ã –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è
‚ùå PostgreSQL –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è
```

### –ü–æ—Å–ª–µ:
```
‚úÖ –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
‚úÖ –û—Ç—á–µ—Ç—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
‚úÖ PostgreSQL –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è
‚úÖ –í—ã–¥–∞—á–∞ –Ω–∞—Å—Ç–æ–µ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
```

## üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ Railway:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –¥–µ–ø–ª–æ—è**:
   - –û—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞ –¥–æ–ª–∂–Ω—ã –∏—Å—á–µ–∑–Ω—É—Ç—å
   - PostgreSQL –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç—á–µ—Ç—ã**:
   - –í 05:30 –ú–°–ö –≤ —á–∞—Ç `-1002813620544`
   - –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –∫–æ–º–∞–Ω–¥—É `/test_report` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—ã–¥–∞—á—É –Ω–∞—Å—Ç–æ–µ–∫**:
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è ‚Üí –ø–æ–ª—É—á–∞–µ—Ç –∫—É–ø–æ–Ω
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–≥–∞—à–∞–µ—Ç –∫—É–ø–æ–Ω ‚Üí —Å—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ –ë–î

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã:
- ‚úÖ –ò–º–ø–æ—Ä—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –ø–æ–¥ –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
- ‚úÖ Railway startup –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ  
- ‚úÖ –û—Ç—á–µ—Ç—ã –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
- ‚úÖ –í—ã–¥–∞—á–∞ –Ω–∞—Å—Ç–æ–µ–∫ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é –Ω–∞ Railway! üöÄ
