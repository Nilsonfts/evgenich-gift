# üéØ –†–ï–§–ï–†–ê–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê "–ü–†–ò–í–ï–î–ò –¢–û–í–ê–†–ò–©–ê" - –ì–û–¢–û–í–ê –ö –ü–†–û–î–ê–ö–®–ù–£

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:

### üèóÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
- ‚úÖ –ü–æ–ª—è `referrer_rewarded` –∏ `referrer_rewarded_date` –¥–æ–±–∞–≤–ª–µ–Ω—ã
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ SQLite –∏ PostgreSQL (dual database)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —Å—Ö–µ–º—ã –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

### üéØ –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞:
- ‚úÖ **48-—á–∞—Å–æ–≤–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ** –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–µ—Ñ–µ—Ä–∞–ª–∞
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏** (—Ä–µ—Ñ–µ—Ä–∞–ª –¥–æ–ª–∂–µ–Ω –ø–æ–≥–∞—Å–∏—Ç—å –Ω–∞—Å—Ç–æ–π–∫—É)
- ‚úÖ **–û–¥–Ω–æ–∫—Ä–∞—Ç–Ω–∞—è –Ω–∞–≥—Ä–∞–¥–∞** –∑–∞ –∫–∞–∂–¥–æ–≥–æ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–µ—Ñ–µ—Ä–∞–ª–∞
- ‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–æ–¥–æ–≤** —Ñ–æ—Ä–º–∞—Ç–∞ `REF{user_id}-{timestamp}`

### ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
- ‚úÖ **–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞** –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
- ‚úÖ **–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Ä–µ—Ñ–µ—Ä–∞–ª–∞
- ‚úÖ **–£–º–Ω—ã–µ –∫–Ω–æ–ø–∫–∏**: "–ü–æ–ª—É—á–∏—Ç—å –Ω–∞–≥—Ä–∞–¥—É" + "–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–æ–ª–∏–∫"
- ‚úÖ **–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å** - —Å–ª—É–∂–±–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ

### üì± –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±–æ—Ç–∞:
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ "–ü—Ä–∏–≤–µ—Å—Ç–∏ —Ç–æ–≤–∞—Ä–∏—â–∞" —Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- ‚úÖ Callback –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

## üöÄ –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:

### database.py
- `check_referral_reward_eligibility()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –Ω–∞–≥—Ä–∞–¥
- `mark_referral_rewarded()` - –≤—ã–¥–∞—á–∞ –Ω–∞–≥—Ä–∞–¥—ã —Å –∫–æ–¥–æ–º
- `get_referral_stats()` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤  
- `get_recently_redeemed_referrals()` - –Ω–µ–¥–∞–≤–Ω–∏–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏

### db/postgres_client.py
- –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è PostgreSQL
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ö–µ–º–∞ users_table —Å –Ω–æ–≤—ã–º–∏ –ø–æ–ª—è–º–∏

### utils/referral_notifications.py (–ù–û–í–´–ô)
- `start_referral_notification_service()` - –∑–∞–ø—É—Å–∫ —Å–ª—É–∂–±—ã
- `check_and_notify_ready_rewards()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥–æ—Ç–æ–≤—ã—Ö –Ω–∞–≥—Ä–∞–¥

### handlers/callback_query.py  
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞–≥—Ä–∞–¥

### main.py
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —Å–ª—É–∂–±—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –±–æ—Ç–∞
- –ò–º–ø–æ—Ä—Ç –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π

## üéØ –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã:

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏–≥–ª–∞—à–∞–µ—Ç –¥—Ä—É–≥–∞** ‚Üí —Ä–µ—Ñ–µ—Ä–∞–ª —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è
2. **–û–∂–∏–¥–∞–Ω–∏–µ 48 —á–∞—Å–æ–≤** + —Ä–µ—Ñ–µ—Ä–∞–ª –¥–æ–ª–∂–µ–Ω –ø–æ–≥–∞—Å–∏—Ç—å –Ω–∞—Å—Ç–æ–π–∫—É
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞** –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
4. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ä–µ—Ñ–µ—Ä–µ—Ä—É** —Å –∫–Ω–æ–ø–∫–∞–º–∏ –¥–µ–π—Å—Ç–≤–∏–π
5. **–ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥—ã** + –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
- ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –õ–æ–≥–∏–∫–∞ 48-—á–∞—Å–æ–≤–æ–≥–æ –æ–∂–∏–¥–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- ‚úÖ Dual database –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è

## üöÄ –ì–û–¢–û–í–ù–û–°–¢–¨ –ö –î–ï–ü–õ–û–Æ: 100%

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–Ω—É. –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –î–µ–ø–ª–æ–π –Ω–∞ Railway —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ä–∞–±–æ—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω —Å—Ä–µ–¥–µ.
